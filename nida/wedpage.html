<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Happy Birthday ‚Äî [Her Name]</title>
  <meta name="description" content="A fun, interactive birthday page made with love. Customize name, date, image, and music in the CONFIG object." />
  <style>
    /* -------------------- Theme & layout -------------------- */
    :root{
      --bg1: #FFF0F6;
      --bg2: #FFF9F2;
      --accent: #FF4B91;
      --accent-2: #FF9AB3;
      --muted: #6b6b6b;
      --card: #ffffff;
      --radius: 18px;
      --maxw: 1100px;
      font-family: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;padding:28px;
      background: radial-gradient(1000px 600px at 10% 10%, #fff4fb 0%, transparent 15%),
                  radial-gradient(900px 500px at 90% 90%, #fffef6 0%, transparent 20%),
                  linear-gradient(180deg,var(--bg1),var(--bg2));
      color:#222;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      display:flex;align-items:center;justify-content:center;
      font-size:16px;
    }
    .wrap{width:100%;max-width:var(--maxw);background:linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.98)); border-radius:22px; box-shadow:0 18px 60px rgba(60,20,60,0.08); overflow:hidden; position:relative}
    header{display:flex;align-items:center;gap:16px;padding:20px 28px}
    .logo{width:64px;height:64px;border-radius:14px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:grid;place-items:center;color:white;font-weight:800;font-size:24px}
    h1{margin:0;font-size:24px}
    .lead{margin:4px 0 0;color:var(--muted);font-size:14px}
    main{display:grid;grid-template-columns:1fr 360px;gap:20px;padding:24px;border-top:1px solid rgba(0,0,0,0.03);align-items:start}
    @media (max-width:940px){main{grid-template-columns:1fr} .aside{order:-1}}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.7), rgba(255,255,255,0.85)); padding:18px;border-radius:14px;backdrop-filter: blur(6px); box-shadow:0 10px 24px rgba(120,40,80,0.04)}
    .hero-title{font-size:20px;margin:0 0 8px 0;display:flex;align-items:center;gap:10px}
    .subtitle{color:var(--muted);font-size:13px;margin:0}
    .typewriter{font-size:18px;margin-top:8px;color:#333;min-height:28px}
    .controls{display:flex;gap:10px;margin-top:12px;flex-wrap:wrap}
    .btn{padding:10px 14px;border-radius:12px;border:0;cursor:pointer;font-weight:600}
    .btn-primary{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:white}
    .btn-ghost{background:transparent;border:1px solid rgba(0,0,0,0.06)}
    .photo{border-radius:12px;overflow:hidden;display:block;height:260px;object-fit:cover;width:100%}
    .countdown{display:flex;gap:10px;justify-content:flex-start;margin-top:10px;flex-wrap:wrap}
    .count-col{min-width:72px;background:white;padding:10px;border-radius:10px;text-align:center;box-shadow:0 8px 22px rgba(120,40,80,0.04)}
    .count-col .num{font-weight:800;font-size:18px}
    .small{font-size:13px;color:var(--muted)}
    .messages{margin-top:14px}
    textarea{width:100%;min-height:84px;padding:12px;border-radius:10px;border:1px solid rgba(0,0,0,0.06);resize:vertical}
    footer{padding:14px 24px;border-top:1px solid rgba(0,0,0,0.03);display:flex;justify-content:space-between;align-items:center;font-size:13px;color:var(--muted)}
    /* heart / gift button */
    .spark{display:inline-grid;place-items:center;width:54px;height:54px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--accent-2));color:white;border:none;font-size:22px;cursor:pointer;box-shadow:0 8px 18px rgba(200,80,120,0.12)}
    /* confetti canvas */
    #confetti{position:absolute;inset:0;pointer-events:none;z-index:40}
    /* modal / printable card */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.45);z-index:90;padding:20px}
    .modal.open{display:flex}
    .card-print{width:880px;max-width:98%;background:white;padding:20px;border-radius:12px;box-shadow:0 20px 80px rgba(0,0,0,0.3)}
    /* balloons (decorative) */
    .balloon{position:absolute;bottom:-200px;width:88px;height:110px;border-radius:50% 50% 45% 55%;display:block;pointer-events:none;opacity:0.95}
    /* playful fonts & animations */
    .wow{font-family: 'Poppins', Inter, system-ui, -apple-system; letter-spacing:0.6px}
    .pulse{animation:pulse 1.6s ease-in-out infinite}
    @keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.02)}100%{transform:scale(1)}}
    /* small utilities */
    .center{text-align:center}
    .muted{color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap" role="main" aria-labelledby="title">
    <canvas id="confetti" aria-hidden="true"></canvas>

    <header>
      <div class="logo" aria-hidden="true">‚ù§</div>
      <div>
        <h1 id="title">Happy Birthday, <span id="herNameSpan">[Her Name]</span> üéâ</h1>
        <p class="lead">A playful page made just for you</p>
      </div>
      <div style="margin-left:auto;display:flex;gap:10px;align-items:center">
        <button id="heartBtn" class="spark" title="Send love">‚ù§</button>
      </div>
    </header>

    <main>
      <!-- LEFT: main interactive area -->
      <section>
        <div class="card" aria-labelledby="hero-heading">
          <h2 id="hero-heading" class="hero-title wow">Surprise for <span id="herNameInline">[Her Name]</span></h2>
          <p class="subtitle">Tap the gift, pop balloons, or press the heart ‚Äî surprises await!</p>

          <!-- Typewriter message -->
          <div id="typewriter" class="typewriter small" aria-live="polite"></div>

          <div class="controls">
            <button id="openCard" class="btn btn-primary">üéÅ Open Gift</button>
            <button id="playMusic" class="btn btn-ghost">‚ñ∂ Play Song</button>
            <button id="downloadBtn" class="btn btn-ghost">‚¨á Save Image</button>
            <button id="popBalloons" class="btn btn-ghost">üéà Pop Balloons</button>
            <div style="margin-left:auto" class="small muted">Saved locally & private</div>
          </div>

          <!-- Countdown -->
          <div style="margin-top:14px">
            <div class="small muted">Countdown to her birthday</div>
            <div class="countdown" role="timer" aria-live="polite" aria-atomic="true">
              <div class="count-col" aria-hidden="false"><div class="num" id="days">--</div><div class="small muted">Days</div></div>
              <div class="count-col"><div class="num" id="hours">--</div><div class="small muted">Hours</div></div>
              <div class="count-col"><div class="num" id="minutes">--</div><div class="small muted">Minutes</div></div>
              <div class="count-col"><div class="num" id="seconds">--</div><div class="small muted">Seconds</div></div>
            </div>
          </div>

          <!-- Message box -->
          <div class="messages">
            <label for="guestMsg" class="small">Write a sweet message (stored locally):</label>
            <textarea id="guestMsg" placeholder="Type something lovely..." aria-label="Message for her"></textarea>
            <div style="display:flex;gap:8px;margin-top:8px">
              <button id="saveMsg" class="btn btn-primary">Save</button>
              <button id="clearMsg" class="btn btn-ghost">Clear</button>
              <div style="margin-left:auto" class="small muted">Only saved on your device</div>
            </div>
          </div>
        </div>

        <!-- Secret note area (revealed by gift) -->
        <div id="secretNote" class="card" style="margin-top:14px;display:none">
          <h3 style="margin-top:0">A secret just for you üíå</h3>
          <div id="secretText" style="font-size:16px;line-height:1.5">
            <!-- populated by JS -->
          </div>
        </div>
      </section>

      <!-- RIGHT: aside with photo & gallery -->
      <aside class="aside">
        <div class="card center">
          <img id="heroPhoto" src="https://images.unsplash.com/photo-1524504388940-b1c1722653e1?q=80&w=1400&auto=format&fit=crop&s=placeholder" alt="[Her Name] photo" class="photo" />
          <div style="margin-top:12px;font-weight:700" id="bdayText">June 1, 2026</div>
          <div class="small muted">Birthday date (edit in CONFIG)</div>
          <div style="margin-top:8px">
            <button id="rsvpBtn" class="btn btn-primary">RSVP</button>
            <button id="cardBtn" class="btn btn-ghost">Print card</button>
          </div>
        </div>

        <div class="card" style="margin-top:14px">
          <h4 style="margin:6px 0">Gallery</h4>
          <div id="thumbs" style="display:flex;gap:8px;flex-wrap:wrap">
            <!-- thumbnails inserted by JS -->
          </div>
        </div>
      </aside>
    </main>

    <footer>
      <div class="small muted">Made with ‚ô• ‚Äî edit the CONFIG at the top of the script to personalize</div>
      <div class="small muted">Tip: replace the photo & song links</div>
    </footer>
  </div>

  <!-- Printable modal -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="card-print" role="document">
      <h2 style="margin-top:0">For: <span id="cardName">[Her Name]</span></h2>
      <p style="font-size:18px">Wishing you the happiest of birthdays. You're loved today and every day.</p>
      <div style="height:360px;background:linear-gradient(90deg,#fff0f6,#fffaf0);border-radius:10px;display:grid;place-items:center;margin:12px 0">
        <div style="text-align:center">
          <div style="font-size:46px;font-weight:800;color:var(--accent)">Happy Birthday</div>
          <div style="font-size:22px;margin-top:8px" id="cardNameBig">[Her Name]</div>
        </div>
      </div>
      <div style="display:flex;gap:8px;justify-content:flex-end">
        <button id="closeModal" class="btn btn-ghost">Close</button>
        <button id="printCard" class="btn btn-primary">Print / Save PDF</button>
      </div>
    </div>
  </div>

  <!-- Hidden audio -->
  <audio id="bgAudio" src="" preload="none" loop></audio>

  <script>
    /* =================== CONFIG: replace these values =================== */
    const CONFIG = {
      herName: 'Anna',                    // her name
      birthdayISO: '2026-06-01T00:00:00', // ISO date of her next birthday
      heroImage: 'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?q=80&w=1400&auto=format&fit=crop&s=placeholder', // main photo
      music: '',                          // link to mp3 (leave empty to disable)
      secretMessage: 'Surprise! Tonight: candlelit dinner at 8pm. ‚ù§Ô∏è', // shown when gift opened
      gallery: [                          // optional extra images (URLs)
        'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?q=80&w=1200&auto=format&fit=crop&s=placeholder',
        'https://images.unsplash.com/photo-1517841905240-472988babdf9?q=80&w=1200&auto=format&fit=crop&s=placeholder'
      ]
    };
    /* ================================================================== */

    // apply initial content
    document.getElementById('herNameSpan').textContent = CONFIG.herName;
    document.getElementById('herNameInline').textContent = CONFIG.herName;
    document.getElementById('cardName').textContent = CONFIG.herName;
    document.getElementById('cardNameBig').textContent = CONFIG.herName;
    document.getElementById('heroPhoto').src = CONFIG.heroImage;
    document.getElementById('bdayText').textContent = new Date(CONFIG.birthdayISO).toLocaleDateString();

    // set audio src if provided
    const audio = document.getElementById('bgAudio');
    if(CONFIG.music && CONFIG.music.trim()!=='') audio.src = CONFIG.music;
    else document.getElementById('playMusic').style.display = 'none';

    /* ---------------- Typewriter effect ---------------- */
    const typetext = [
      `Hey ${CONFIG.herName} ‚Äî you light up every room.`,
      'You make the small things sparkle ‚ú®',
      'Tap the gift for a little surprise...'
    ];
    const typeEl = document.getElementById('typewriter');
    let tIdx = 0, charIdx = 0;
    function typeLoop(){
      if(tIdx >= typetext.length) { typeEl.textContent = ''; tIdx = 0; }
      const cur = typetext[tIdx];
      typeEl.textContent = cur.slice(0, charIdx);
      charIdx++;
      if(charIdx > cur.length){ tIdx++; charIdx = 0; setTimeout(typeLoop, 1200); }
      else setTimeout(typeLoop, 48 + Math.random()*40);
    }
    typeLoop();

    /* ---------------- Countdown ---------------- */
    const daysEl = document.getElementById('days');
    const hoursEl = document.getElementById('hours');
    const minsEl = document.getElementById('minutes');
    const secsEl = document.getElementById('seconds');

    function updateCountdown(){
      const now = new Date();
      const target = new Date(CONFIG.birthdayISO);
      let diff = Math.max(0, target - now);
      const days = Math.floor(diff / (1000*60*60*24));
      diff -= days*(1000*60*60*24);
      const hours = Math.floor(diff/(1000*60*60));
      diff -= hours*(1000*60*60);
      const mins = Math.floor(diff/(1000*60));
      diff -= mins*(1000*60);
      const secs = Math.floor(diff/1000);
      daysEl.textContent = String(days);
      hoursEl.textContent = String(hours).padStart(2,'0');
      minsEl.textContent = String(mins).padStart(2,'0');
      secsEl.textContent = String(secs).padStart(2,'0');
    }
    updateCountdown(); setInterval(updateCountdown,1000);

    /* ---------------- Local save for guest message ---------------- */
    const guest = document.getElementById('guestMsg');
    const saved = localStorage.getItem('birthday_guest_msg');
    if(saved) guest.value = saved;
    document.getElementById('saveMsg').addEventListener('click', ()=>{ localStorage.setItem('birthday_guest_msg', guest.value); alert('Saved locally on this device.'); });
    document.getElementById('clearMsg').addEventListener('click', ()=>{ guest.value=''; localStorage.removeItem('birthday_guest_msg'); });

    /* ---------------- Gift / secret reveal ---------------- */
    const secretNote = document.getElementById('secretNote');
    const secretText = document.getElementById('secretText');
    document.getElementById('openCard').addEventListener('click', ()=> {
      secretText.textContent = CONFIG.secretMessage;
      secretNote.style.display = 'block';
      launchConfetti(window.innerWidth/2, window.innerHeight/3, 80);
      playPopSound();
    });

    /* ---------------- Play / pause music ---------------- */
    document.getElementById('playMusic').addEventListener('click', async function(){
      if(audio.paused){ try{ await audio.play(); this.textContent = '‚ùö‚ùö Pause Song'; } catch(e){ alert('Click the page or the button again to allow audio (browser requirement).'); } }
      else{ audio.pause(); this.textContent = '‚ñ∂ Play Song'; }
    });

    /* ---------------- RSVP / print card handlers ---------------- */
    document.getElementById('rsvpBtn').addEventListener('click', ()=>{ const ans = prompt('Will you join the celebration tonight? (Yes / No)'); if(ans) alert('RSVP saved locally: ' + ans); });
    const modal = document.getElementById('modal');
    document.getElementById('cardBtn').addEventListener('click', ()=>{ modal.classList.add('open'); modal.setAttribute('aria-hidden','false'); });
    document.getElementById('closeModal').addEventListener('click', ()=>{ modal.classList.remove('open'); modal.setAttribute('aria-hidden','true'); });
    document.getElementById('printCard').addEventListener('click', ()=> window.print());

    /* ---------------- Thumbnails gallery ---------------- */
    const thumbs = document.getElementById('thumbs');
    CONFIG.gallery.forEach((url, i) => {
      const img = document.createElement('img');
      img.src = url;
      img.alt = `photo ${i+1}`;
      img.style.width = '80px';
      img.style.height = '60px';
      img.style.objectFit = 'cover';
      img.style.borderRadius = '8px';
      img.style.cursor = 'pointer';
      img.addEventListener('click', ()=> { document.getElementById('heroPhoto').src = url; launchConfetti(window.innerWidth/2, window.innerHeight/2, 40); });
      thumbs.appendChild(img);
    });

    /* ---------------- Confetti (canvas) ---------------- */
    const confetti = document.getElementById('confetti');
    const ctx = confetti.getContext('2d');
    let W = 0, H = 0, confettiParticles = [];
    function resizeCanvas(){ W = confetti.width = confetti.clientWidth; H = confetti.height = confetti.clientHeight; }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    function makeParticle(x,y){
      return {
        x, y,
        vx: (Math.random()-0.5)*6,
        vy: (Math.random()*-6-1),
        r: Math.random()*8+6,
        rot: Math.random()*360,
        vro: (Math.random()-0.5)*8,
        color: `hsl(${Math.random()*60+300},80%,60%)`
      };
    }
    function launchConfetti(x,y,qty=40){
      for(let i=0;i<qty;i++) confettiParticles.push(makeParticle(x + (Math.random()-0.5)*80, y + (Math.random()-0.5)*40));
    }
    function confettiLoop(){
      ctx.clearRect(0,0,W,H);
      for(let i=confettiParticles.length-1;i>=0;i--){
        const p = confettiParticles[i];
        p.vy += 0.18;
        p.x += p.vx;
        p.y += p.vy;
        p.rot += p.vro;
        ctx.save();
        ctx.translate(p.x,p.y);
        ctx.rotate(p.rot*Math.PI/180);
        ctx.fillStyle = p.color;
        ctx.fillRect(-p.r/2, -p.r/2, p.r, p.r*0.6);
        ctx.restore();
        if(p.y > H + 50 || p.x < -50 || p.x > W + 50) confettiParticles.splice(i,1);
      }
      requestAnimationFrame(confettiLoop);
    }
    confettiLoop();

    /* initial gentle confetti on load */
    window.addEventListener('load', ()=> { setTimeout(()=> launchConfetti(W/2, H/3, 80), 600); });

    /* ---------------- Fireworks (small) ---------------- */
    // We'll reuse confetti canvas for a firework-like burst by creating many small particles
    function createFirework(x,y,qty=80){
      for(let i=0;i<qty;i++){
        const angle = Math.random()*Math.PI*2;
        confettiParticles.push({
          x, y,
          vx: Math.cos(angle)*(Math.random()*6+1),
          vy: Math.sin(angle)*(Math.random()*6+1),
          r: Math.random()*3+1,
          rot: 0,
          vro: 0,
          color: `hsl(${Math.random()*360},80%,60%)`
        });
      }
    }

    /* ---------------- Balloon popping mini-game ---------------- */
    // Create floating balloons elements and allow popping with click
    let balloonCount = 10;
    const poppedEmojis = ['üíñ','üåü','‚ú®','üéâ','üòò'];
    function spawnBalloons(n=10){
      for(let i=0;i<n;i++){
        const b = document.createElement('div');
        b.className = 'balloon';
        const left = Math.random()*90;
        b.style.left = left + '%';
        b.style.background = `radial-gradient(circle at 30% 30%, ${randomColor()}, ${randomColor(200)})`;
        b.style.animationDuration = (10 + Math.random()*8) + 's';
        b.style.transform = `translateY(${20 + Math.random()*60}px)`;
        b.style.opacity = 0.98;
        b.setAttribute('role','button');
        b.setAttribute('aria-label','balloon');
        document.body.appendChild(b);
        // pop handler
        b.addEventListener('click', (e)=>{
          const em = document.createElement('div');
          em.textContent = poppedEmojis[Math.floor(Math.random()*poppedEmojis.length)];
          em.style.position='absolute';
          em.style.left = (e.clientX - 12) + 'px';
          em.style.top = (e.clientY - 20) + 'px';
          em.style.fontSize = '22px';
          em.style.pointerEvents = 'none';
          document.body.appendChild(em);
          setTimeout(()=> em.remove(), 1200);
          playPopSound();
          // balloon pop animation
          b.style.transition = 'transform 0.18s ease, opacity 0.25s';
          b.style.transform = 'scale(0.2) translateY(-20px)';
          b.style.opacity = '0';
          setTimeout(()=> b.remove(), 300);
        });
        // cleanup after animation ends
        setTimeout(()=>{ if(document.body.contains(b)) b.remove(); }, 22000);
      }
    }
    function randomColor(offset=0){ const h = Math.floor(Math.random()*60 + offset); return `hsl(${h},80%,60%)`; }

    document.getElementById('popBalloons').addEventListener('click', ()=> spawnBalloons(12));
    // spawn initial decorative balloons
    spawnBalloons(6);

    /* ---------------- Heart button fires confetti & sound ---------------- */
    document.getElementById('heartBtn').addEventListener('click', (e)=>{
      const rect = e.target.getBoundingClientRect();
      const x = rect.left + rect.width/2;
      const y = rect.top + rect.height/2;
      launchConfetti(x, y, 80);
      playPopSound();
    });

    /* ---------------- Download snapshot (PNG) ---------------- */
    // Note: SVG foreignObject trick - works nicely for simple pages; may not capture external fonts/images immediately in some browsers
    document.getElementById('downloadBtn').addEventListener('click', async ()=>{
      try{
        const node = document.querySelector('.wrap');
        const rect = node.getBoundingClientRect();
        const svg = `<svg xmlns='http://www.w3.org/2000/svg' width='${rect.width}' height='${rect.height}'>
          <foreignObject width='100%' height='100%'>${new XMLSerializer().serializeToString(node)}</foreignObject></svg>`;
        const blob = new Blob([svg],{type:'image/svg+xml;charset=utf-8'});
        const url = URL.createObjectURL(blob);
        const img = new Image();
        img.onload = ()=> {
          const cnv = document.createElement('canvas');
          cnv.width = rect.width; cnv.height = rect.height;
          const cctx = cnv.getContext('2d');
          cctx.fillStyle = '#fff'; cctx.fillRect(0,0,cnv.width,cnv.height);
          cctx.drawImage(img,0,0);
          cnv.toBlob((b)=>{ const a = document.createElement('a'); a.href = URL.createObjectURL(b); a.download = 'happy-birthday.png'; a.click(); URL.revokeObjectURL(url); }, 'image/png');
        };
        img.src = url;
      }catch(e){ alert('Snapshot failed in this browser. Try taking a screenshot instead.'); }
    });

    /* ---------------- small sound effect for pops ---------------- */
    function playPopSound(){
      try{
        const s = new Audio('data:audio/mp3;base64,//uQZAAAAAAAAAAAAAAAAAAAAAA...'); // small base64 stub left intentionally blank to avoid huge payload
        // The blank source will silently fail in many browsers; for best results replace with a small mp3 file link
        s.play().catch(()=>{ /* ignore autoplay restrictions */ });
      }catch(e){}
    }

    /* ---------------- small utility & helpers ---------------- */
    function random(min, max){ return Math.random()*(max-min)+min; }

    /* ---------------- Make accessible: keyboard trigger for gift ---------------- */
    document.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter' || e.key === ' ') {
        // focus may be on buttons; if not, toggle gift
        const active = document.activeElement;
        if(active === document.body || active === document.documentElement){
          document.getElementById('openCard').click();
        }
      }
    });

    /* ---------------- Extra: clicking anywhere near hero photo shows fireworks ---------------- */
    document.getElementById('heroPhoto').addEventListener('click', (e)=>{
      createFirework(e.clientX, e.clientY);
      launchConfetti(e.clientX, e.clientY, 50);
    });
    function createFirework(x,y){ createFireworkParticles(x,y,60); }
    function createFireworkParticles(x,y,qty){
      for(let i=0;i<qty;i++){
        const angle = Math.random()*Math.PI*2;
        confettiParticles.push({
          x, y,
          vx: Math.cos(angle)*(Math.random()*6+1),
          vy: Math.sin(angle)*(Math.random()*6+1),
          r: Math.random()*3+1,
          rot: 0,
          vro: 0,
          color: `hsl(${Math.random()*360},80%,60%)`
        });
      }
    }

    /* ---------------- Accessibility & graceful fallback notes ---------------- */
    // If JavaScript is disabled, the static HTML (name, date, photo) remains visible.
    // For audio autoplay browsers require a user gesture ‚Äî we provide the Play Song button.

  </script>
</body>
</html>
